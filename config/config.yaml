# Application Configuration
app:
  name: astro-loader
  environment: dev
  log_level: INFO

# Data Source Configuration
source:
  name: meteorite_landings
  file_type: csv
  file_path: /mnt/data/Meteorite_Landings.csv
  encoding: utf-8


# Validation Rules
validation:
  required_columns:
    - id
    - name
    - mass
    - year
    - reclat
    - reclong

  data_types:
    id: int
    name: str
    mass: float
    year: str
    reclat: float
    reclong: float

  allow_nulls:
    mass: false
    year: true
    reclat: true
    reclong: true

# Transformation Rules
transformation:
  normalize_column_names: true
  trim_strings: true
  fill_missing:
    mass: 0.0


# Deduplication Rules
deduplication:
  enabled: true
  keys:
    - id

# Database Target Tables
database:
  staging_table: stg_meteorite_landings
  reject_table: stg_rejects
  batch_size: 500


logging:
  version: 1
  disable_existing_loggers: False
  formatters:
    standard_format:
      format: '%(asctime)s | %(levelname)s | %(module)s | %(lineno)s | %(message)s'
    json_format:
      class: pythonjsonlogger.jsonlogger.JsonFormatter
      format: '%(asctime)s %(levelname)s %(module)s %(lineno)s %(message)s'

  handlers:
    console:
      class: logging.StreamHandler
      level: INFO
      formatter: standard_format
      stream: ext://sys.stdout
    error_log:
      class: logging.FileHandler
      level: INFO
      formatter: json_format
      filename: logs/astro-loader.log
      mode : 'a'
  
  root:
    handlers: [console, error_log]
    level: INFO